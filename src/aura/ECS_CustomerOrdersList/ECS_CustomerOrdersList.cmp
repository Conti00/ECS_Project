<!--
 - Created by BRITENET on 06.02.2019.
 -->

<aura:component description="ECS_CustomerOrdersList"
                    implements="forceCommunity:availableForAllPageTypes,flexipage:availableForAllPageTypes" access="global"
                    controller="ECS_CarsManagerController">

        <aura:attribute name="customerOrdersItems" type="Object[]"/>
        <aura:attribute name="ordersTotalAmount" type="Decimal"/>
        <!--<aura:attribute name="data" type="Object"/>-->
        <!--<aura:attribute name="columns" type="List"/>-->
        <aura:attribute name="selectedOrderId" type="String"/>
        <aura:attribute name="newLine" type="String" />

        <!--<aura:handler name="init" value="{! this }" action="{! c.doInit }"/>-->
        <aura:handler name="change" value="{!v.customerOrdersItems}" action="{!c.onOrderItemsChange}"/>
        <aura:registerEvent name="orderItemSelected" type="c:ECS_SelectedTableRowEvent"/>


        <lightning:card title="My Orders"  class="slds-tabs_card" footer="">
            <aura:set attribute="actions">

            </aura:set>
            <lightning:layout horizontalAlign="center" verticalAlign="center" multipleRows='true'>
                <table class="slds-table slds-table_bordered slds-table_cell-buffer ">
                    <thead>
                    <tr class="slds-text-title_caps">
                        <th scope="col">
                            <div class="slds-truncate" title="Index">No.</div>
                        </th>
                        <th scope="col">
                            <div class="slds-truncate" title="Order number">Order Number</div>
                        </th>
                        <th scope="col">
                            <div class="slds-truncate" title="Created Date">Order Date</div>
                        </th>
                        <th scope="col">
                            <div class="slds-truncate" title="Products quantity">Cars</div>
                        </th>
                        <th scope="col">
                            <div class="slds-truncate" title="Order Amount">Amount</div>
                        </th>
                    </tr>
                    </thead>
                    <tfoot>
                    </tfoot>
                    <tbody>
                    <aura:iteration items="{!v.customerOrdersItems}" var="orderItem" indexVar="index">
                        <tr aura:id="tableRow" onclick="{!c.tableRowClicked}" data-id="{!orderItem.Id}"
                            data-index="{!index}" >
                            <td data-label="Name">
                                <lightning:formattedNumber value="{!index + 1}"/>
                            </td>
                            <td data-label="Name">
                                <lightning:formattedText value="{!orderItem.OrderNumber}"/>
                            </td>
                            <td data-label="Year">
                                <lightning:formattedDateTime day="2-digit" month="numeric" year="numeric"  hour="2-digit" minute="2-digit" value="{!orderItem.CreatedDate}"/>
                            </td>
                            <td data-label="Year">
                                <lightning:formattedNumber value="{!orderItem.OrderItems.length}"/>
                            </td>
                            <td data-label="Model">
                                <lightning:formattedNumber style="currency" value="{!orderItem.TotalAmount}"/>
                            </td>
                        </tr>
                    </aura:iteration>
                    </tbody>
                </table>

                <!--<c:ECS_ShowFormattedCurrencyAmount amount="{!v.ordersTotalAmount}"/>-->
            </lightning:layout>
            <footer class="slds-float_right slds-align-bottom">

                <lightning:formattedText value="Total amount:  "/>
                <ui:outputCurrency  value="{!v.ordersTotalAmount}"/>

            </footer>
        </lightning:card>

    </aura:component>
